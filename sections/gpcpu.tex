\documentclass[../main.tex]{subfiles}

\begin{document}
\section{OpenMP (Open Multi Procesing)}

Aktuelle CPUs im Arbeitsplatzrechner, Laptop, Tablet oder Smartphone besitzen mehrere CPU-Kerne. Um das volle Potenzial der aktuellen CPUs auszunutzen, ist es zwingend notwendig, Programme zu parallelisieren.
„Unter der Parallelisierung eines Programms versteht man, dass mehrere Teile einer Aufgabe gleichzeitig nebeneinander ausgeführt werden, um so die Gesamtaufgabe schneller als bei strikt serieller Verarbeitung zu beenden.“ (Günther)
Mit OpenMP ist es relativ einfach möglich, Programme mithilfe von Direktiven im Programmcode parallel ablaufen zu lassen. OpenMP kann für die Programmiersprachen C, C++ und Fortran verwendet werden.

\subsection{Programmiermodell}

die nebenläufige Abarbeitung von Programmteilen wird bei OpenMP durch das Fork-Join-Prinzip erzielt. Dabei passiert an einer bestimmten Stelle im Programmcode ein sogenannter Fork. An dieser Stelle erzeugt der Thread, der den bisherigen Programmcode ausgeführt hat, neue Threads die den folgenden Code parallel ausführen. Der Thread, der die anderen Threads erzeugt hat, wird Master-Thread genannt. Am Ende des parallelen Bereichs geschieht ein Join. Dabei werden alle Treads synchronisiert und beendet. Lediglich der Master-Thread bleibt erhalten und führt das weitere Programm seriell aus.

OpenMP erlaubt es, einen Fork innerhalb eines parallelen Programmabschnittes zu tätigen. Der außerhalb liegende Join muss dann auf alle innere Joins warten, bis alle Threads beendet werden können.

\subsection{OpenMP-Direktiven}

Im folgenden Abschnitt sind alle Programmbeispiele in C- oder C++-Syntax gehalten. Die selben Anweisungen sind auch in Fortran möglich, können dann jedoch etwas anders aussehen

zuerst muss die Datei omp.h includiert werden. Anschließend kann mit \#pragma omp <Klausel> eine Compiler-Direktive angegeben werden die das Programm mithilfe von OpenMP parallel ausführt. Von Kompilern, die OpenMP nicht unterstützen, wird diese Zeile ignoriert. Somit kann der gleiche Programmcode als paralleles Programm oder als serielles Programm compiliert werden.
OpenMP kann zum einen den selben Programmcode auf mehreren Threads ausführen, oder verschiedene Berechnungen auf verschiedenen Threads. 

\subsubsection{Variablen}

Variablen können entweder privat oder gemeinsam deklariert werden. Eine gemeinsame Variable kann von verschiedenen Threads genutzt werden, während eine private Variable für jeden Thread einen anderen Wert annehmen kann. Gemeinsame Variablen werden mit dem Parameter shared(Liste\_der\_Variablen) deklariert. In der Liste werden alle Variablen hineingeschrieben, die gemeinsam genutzt werden sollen. Die Variablen sind mit dem Wert initialisiert, die sie vor dem Fork hatten. Private Variablen können hingegen mit private(Liste\_der\_Variablen) deklariert werden.  Anders als die Gemeinsamen Variablen sind diese anfangs nicht initialisiert, mit Ausnahme von Objekten die einen Konstruktur besitzen und Indexvariablen von Schleifen.
Soll der Wert, den die Variable vor Beginn der parallelen Ausführung hatte, verwendet werden, muss dafür der Parameter firstprivate(Liste\_der\_Variablen) verwendet werden. Soll der Wert der Variable vor dem Join im weiteren Programmablauf verwendet werden, muss hierfür der Parameter lastprivate(Liste\_der\_Variablen) verwendet werden.

Eine weitere Möglichkeit sind die Reduktionsvariablen. Diese funktionieren wie private Variablen, bis zum Zeitpunkt des Joins. Bei Reduktionsvariablen werden alle Werte der privaten Variablen durch eine Operation zusammengefasst. Bei dieser Operation kann es sich um die Addition, Subtraktion, Multiplikation, XOR, binäre und Logische Und-Verknüpfung oder binäre und Logische Oder-Verknüpfung handeln. Der Parameter für Reduktionsvariablen lautet reduction( op:Liste\_der\_Variablen).
„Wird eine Variable in keiner der Deklarationen erwähnt, wird sie standardmäßig als gemeinsame Variable deklariert. Eine Ausnahme hiervon bildet die bei der Aufteilung einer Schleife auf mehrere Threads erzeugte Index-Variable der Schleife, die standardmäßig als private Variable deklariert wird. Soll ein explizites Deklarieren jeder im parallelen Bereich verwendeten Variable erzwungen werden, so wird der Direktive zusätzlich der Parameter default(none) hinzugefügt.“ (Uni München)

\subsubsection{Parallelisierung}


\end{document}